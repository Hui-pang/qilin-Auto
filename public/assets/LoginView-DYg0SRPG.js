import{_ as b,r as d,c as V,a,w as t,E as x,u as y,o as E,b as h,d as k,e as I,f as M,g as S,h as p,i as L,j as m,k as u}from"./index-CWseees8.js";/* empty css              *//* empty css               *//* empty css                 */import{_ as A}from"./qilinauto-logo-Dt5Sybbc.js";const B={class:"login-container"},C={__name:"LoginView",setup(N){const c=y(),i=d(!1),o=d({username:"",password:"",rememberMe:!1}),_=async()=>{if(!o.value.username||!o.value.password){u.warning("请输入用户名和密码");return}i.value=!0;try{try{const l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.value.username,password:o.value.password})}),e=await l.json();if(l.ok){const n=o.value.rememberMe?2592e6:864e5,s=new Date().getTime()+n;localStorage.setItem("token",e.token),localStorage.setItem("expiresAt",s.toString()),u.success("登录成功"),c.push("/")}else throw new Error(e.error||"登录失败")}catch(l){console.error("登录失败:",l),u.error(l.message||"登录失败")}}catch(l){console.error("登录失败:",l),u.error("登录失败")}finally{i.value=!1}};return(l,e)=>{const n=M,s=I,f=S,g=L,v=h,w=x;return E(),V("div",B,[a(w,{class:"login-card"},{header:t(()=>e[3]||(e[3]=[m("div",{class:"logo-container"},[m("img",{src:A,alt:"QilinAuto Logo",class:"logo-image"}),m("h2",{class:"login-title"},"qilin Auto")],-1)])),default:t(()=>[a(v,{model:o.value,onSubmit:k(_,["prevent"])},{default:t(()=>[a(s,null,{default:t(()=>[a(n,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.username=r),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(n,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(f,{modelValue:o.value.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.rememberMe=r)},{default:t(()=>e[4]||(e[4]=[p("记住登录")])),_:1},8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(g,{type:"primary","native-type":"submit",class:"login-button",loading:i.value},{default:t(()=>e[5]||(e[5]=[p(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}},q=b(C,[["__scopeId","data-v-c3d771bb"]]);export{q as default};
